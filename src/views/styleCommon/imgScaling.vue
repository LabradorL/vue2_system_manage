<template>
  <div class="app-container">
    <div id="statsContainer" class="stats-container">
      <div class="col-sm-12 padding0 overflow-x-auto">
        <div ref="statsMapWrapper" class="stats-map-wrapper">
          <div class="font-size0 bg-img-box">
            <img src="@/assets/images/stats_map.png" class="stats-bg-img">
            <div id="statsContent" class="stats-content">
              <div id="02_114_001" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_002" class="stats-item stats-item-top">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_003" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_004" class="stats-item stats-item-top">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_005" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_006" class="stats-item stats-item-top">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_007" class="stats-item stats-item-top">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_008" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_009" class="stats-item stats-item-top">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_010" class="stats-item stats-item-top">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_011" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_007" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_008" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_009" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_010" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_011" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_114_012" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_102_001" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_019" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_020" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_021" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_022" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="02_023" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_101_001" class="stats-item stats-item-right">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_001" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_002" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_003" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_004" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_005" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_006" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_007" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_008" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_009" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_010" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_011" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_114_012" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_015" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_102_001" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_017" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_018" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_019" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_020" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_021" class="stats-item stats-item-bottom">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_022" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_023" class="stats-item stats-item-right">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_024" class="stats-item">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
              <div id="01_025" class="stats-item stats-item-right">
                <span>deviceName</span>
                <br>
                <span class="processing">deviceProcessing</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  // 组件名称
  name: 'ImageScaling',
  // 局部注册的组件
  components: {},
  // 组件状态值
  data() {
    return {}
  },
  // 计算属性
  computed: {},
  // 侦听器
  watch: {},
  created() {
  },
  mounted() {
    this.$nextTick(() => {
      this.initMapCss()
    })
  },
  // 被 keep-alive 缓存的组件激活（显示）时调用。
  activated() { },
  // 被 keep-alive 缓存的组件失活（隐藏）时调用。
  deactivated() { },
  beforeDestroy() {
  },
  destroyed() {
  },
  // 方法
  methods: {
    /**
 * 初始化流水线地图样式
 */
    initMapCss() {
      // 流水线地图数据
      const statsItemPosition = [
        'top: 130px; left: 386px',
        'top: 65px; left: 482px',
        'top: 130px; left: 552px',
        'top: 65px; left: 622px',
        'top: 130px; left: 682px',
        'top: 65px; left: 778px',
        'top: 35px; left: 868px',
        'top: 140px; left: 915px',
        'top: 45px; left: 955px',
        'top: 45px; left: 1070px',
        'top: 155px; left: 1070px',
        // 上边部分的下
        'top: 295px; left: 386px',
        'top: 370px; left: 482px',
        'top: 295px; left: 552px',
        'top: 370px; left: 622px',
        'top: 295px; left: 682px',
        'top: 370px; left: 778px',
        'top: 435px; left: 975px',
        // 上边部分的右
        'top: 175px; left: 1280px',
        'top: 275px; left: 1190px',
        'top: 260px; left: 1015px',
        'top: 355px; left: 1015px',
        'top: 430px; left: 1205px',
        'top: 505px; left: 1465px',
        // 下部分位置开始
        'bottom: 115px;left: 10px',
        'bottom: 190px; left: 80px',
        'bottom: 115px; left: 176px',
        'bottom: 190px; left: 246px',
        'bottom: 115px; left: 316px',
        'bottom: 190px; left: 386px',
        'bottom: 115px; left: 482px',
        'bottom: 190px; left: 552px',
        'bottom: 115px; left: 622px',
        'bottom: 190px; left: 682px',
        'bottom: 115px; left: 778px',
        'bottom: 190px; left: 848px',
        // 下边部分无规律部分
        'bottom: 170px; left: 930px',
        'bottom: 235px; left: 999px',
        'bottom: 290px; left: 1138px',
        'bottom: 180px; left: 1071px',
        'bottom: 180px; left: 1205px',
        'bottom: 90px; left: 1071px',
        'bottom: 110px; left: 1205px',
        'bottom: 40px; left: 1265px',
        'bottom: 230px; left: 1295px',
        'bottom: 160px; left: 1390px',
        'bottom: 125px; left: 1295px',
        'bottom: 165px; left: 1515px'
      ]
      const statsItems = document.getElementsByClassName('stats-item')
      for (let i = 0; i < statsItems.length; i++) {
        statsItems[i].style = statsItemPosition[i]
      }
      // 做适配 计算zoom
      const statsContainerWidth = document.getElementById('statsContainer').offsetWidth
      const tempZoom = statsContainerWidth / 1668
      const statsMapWrapper = this.$refs.statsMapWrapper
      if (statsMapWrapper) {
        statsMapWrapper.style.zoom = tempZoom
      }
    }
  }
}
</script>

<style lang="scss" scoped>
.overflow-x-auto {
  overflow-x: auto;
}
.stats-container .padding0 {
  padding: 0;
}
.stats-map-wrapper {
  width: 1640px;
  margin: 0 auto;
  zoom: 1;
  box-sizing: border-box;
}
.bg-img-box {
  /*min-width: 700px;*/
  /*height: 100vh;*/
  position: relative;
  bottom: 0;
  padding: 30px 0 30px 40px;
  box-sizing: border-box;
  overflow-x: auto;
}
.stats-bg-img {
  position: relative;
  width: 1580px;
}
.stats-content {
  width: 100%;
  height: 100%;
  position: absolute;
  left: 0;
  top: 0;
  z-index: 3000;
  /*background: url(/img/alarms_map.png) center no-repeat;*/
}
.stats-item {
  position: absolute;
  width: 80px;
  background: #ffffff;
  box-shadow: 0px 4px 14px 1px rgba(0, 101, 105, 0.1);
  border-radius: 2px 2px 2px 2px;
  opacity: 1;
  border: 1px solid #dceceb;
  font-size: 12px;
  font-weight: bold;
  color: #006569;
  padding: 5px 4px;
  box-sizing: border-box;
}
.stats-item .processing {
  color: #f52c36;
  font-size: 14px;
}
.stats-item .alarmcount {
  color: #006569;
  font-size: 14px;
}
.stats-item-hover {
  display: none;
  position: absolute;
  width: 224px;
  height: 194px;
  background: #ffffff;
  border-radius: 2px 2px 2px 2px;
  opacity: 1;
  border: 1px solid #dceceb;
  box-shadow: 0px 10px 20px 1px rgba(0, 101, 105, 0.1);
  z-index: 4000;
  left: 75px;
  top: -75px;
  font-weight: bold;
  color: #006569;
  line-height: 34px;
  box-sizing: border-box;
  overflow-y: hidden;
}
.stats-item.stats-item-top .stats-item-hover {
  top: -30px;
}
.stats-item.stats-item-right .stats-item-hover {
  left: -220px;
}
.stats-item.stats-item-bottom .stats-item-hover {
  top: -130px;
}

.hover-title {
  padding-right: 10px;
  padding-left: 11px;
  display: flex;
  justify-content: space-between;
}
.pl-pr-18 {
  padding: 0 28px;
}
.percentage-red {
  color: #f52c36;
}

.border-bottom-dashed {
  border-bottom: 1px dashed #006569;
}
.device-detail-info {
  max-height: 194px;
  padding: 0 10px 0 0;
  margin: 0 7px;
  overflow-y: auto;
}
.font-weight400 {
  font-weight: 400;
}
.stats-item.abnormal {
  background: #f52c36;
  box-shadow: 0px 4px 14px 1px rgba(0, 101, 105, 0.1);
  border-radius: 2px 2px 2px 2px;
  opacity: 1;
  border: 1px solid #ffffff;
  color: #fff;
  animation: warn 2s ease-out 0s infinite;
}
.stats-item.abnormal .stats-item-hover {
  border: 2px solid #f52c36;
  box-shadow: 0px 10px 20px 1px rgba(245, 44, 54, 0.2);
}
.stats-item.abnormal .device-detail-info {
  padding: 0 7px;
  height: 140px;
  overflow: hidden;
  margin: 0;
}
.stats-message {
  height: 140px;
  overflow-y: auto;
  line-height: 24px;
}
.stats-item.abnormal .processing {
  color: #fff;
  animation: colorChange 2s ease-out 0s infinite;
}
.stats-item.abnormal .alarmcount {
  color: #fff;
  animation: colorChange 2s ease-out 0s infinite;
}
.width75 {
  width: 75px;
}
@keyframes warn {
  0% {
    background: #f52c36;
    color: #fff;
  }
  50% {
    background: #f52c36;
    color: #fff;
  }
  100% {
    background: #ffffff;
    color: #006569;
  }
}
@keyframes colorChange {
  0% {
    color: #fff;
  }
  50% {
    color: #fff;
  }
  100% {
    color: #f52c36;
  }
}
</style>
