import comTitle from '../../../components/com-title/com-title.vue'
// import dictOptions from "@/assets/js/dicts";
// import { selectDictLabel } from "@/assets/js/dicts";
// import homApi from "@/api/home";
export default {
  components: { comTitle },
  data() {
    return {
      // 顶部信息
      abnormalInfo: {
        devId: '', // 线路编号
        name: '', // 线路名称：
        orgName: '', // 所属单位
        abnormalType: '', // （1-过载 2-重载 3-三相不平衡 5-低电压）
        startTime: '', // 开始时间e
        endTime: '', // 结束时间：
        maxLoadRate: '', // 最大负载率：
        spanTime: '' // 持续时长：
      },
      // 顶部不同类型显示不同文字描述的对应关系
      abnormalTypeMapTable: {
        1: '最大负载率(%)',
        2: '最大负载率(%)',
        3: '最大不平衡度(%)',
        5: '最小电压(v)'
      },
      deviceType: '1', // 1线路 2 配变
      // 底部信息
      loadRateInfo: {
        maxLoadRate: '', // 最大负载率
        loadRateTime: '', // 最大负载率发生时间
        maxCurrent: '', // 最大电流
        currentTime: '', // 最大电流发生时间
        maxCurrentImbalance: null, // 最大电流不平衡度
        maxCurrentImbalanceTime: null, // 最大电流不平衡度时间
        maxVoltageImbalance: null, // 最大电压不平衡度
        maxVoltageImbalanceTime: null // 最大电压不平衡度时间
      },
      // 底部不同类型不同文字描述的对应关系
      abnormalTypeLine: {
        1: [
          {
            title: '最大负载率',
            unit: '%',
            fieldName: 'maxLoadRate',
            fieldTime: 'loadRateTime'
          },
          {
            title: '最大电流',
            unit: 'A',
            fieldName: 'maxCurrent',
            fieldTime: 'currentTime'
          }
        ],
        2: [
          {
            title: '最大负载率',
            unit: '%',
            fieldName: 'maxLoadRate',
            fieldTime: 'loadRateTime'
          },
          {
            title: '最大电流',
            unit: 'A',
            fieldName: 'maxCurrent',
            fieldTime: 'currentTime'
          }
        ],
        3: [
          {
            title: '电压最大不平衡度',
            unit: '%',
            fieldName: 'maxVoltageImbalance',
            fieldTime: 'maxVoltageImbalanceTime'
          },
          {
            title: '电流最大不平衡度',
            unit: '%',
            fieldName: 'maxCurrentImbalance',
            fieldTime: 'maxCurrentImbalanceTime'
          }
        ],
        5: [
          {
            title: '最小电压',
            unit: 'v',
            fieldName: 'minVoltage',
            fieldTime: 'currentTime'
          }
        ]
      },
      echartYAxisName: {
        1: '电流(A)',
        2: '电流(A)',
        3: '电压不平衡度(%)',
        5: '电压(v)'
      },
      echartYAxisUnit: {
        1: '(A)',
        2: '(A)',
        3: '(%)',
        5: '(v)'
      },
      myChart: null
    }
  },
  mounted() {},
  methods: {
    handleOpen(data, queryDate, deviceType) {
      console.log('获取右侧数据')
      if (this.myChart) {
        this.myChart.clear()
      }
      this.abnormalInfo = data
      this.deviceType = deviceType
      this.getEchartData(queryDate)
    },
    // 异常类型转换
    dictFamtter(val) {
      return '重载'
      // return selectDictLabel(dictOptions.abnormalType, val);
    },
    // 获取曲线图数据
    getEchartData(queryDate) {
      console.log(this.abnormalInfo, 'this.abnormalInfo')
      const nowDate = this.$moment().format('YYYY-MM-DD')
      const param = {
        begDate: this.abnormalInfo.startTime
          ? this.$moment(this.abnormalInfo.startTime).format('YYYY-MM-DD')
          : nowDate,
        endDate: this.abnormalInfo.endTime
          ? this.$moment(this.abnormalInfo.endTime).format('YYYY-MM-DD')
          : nowDate,
        devId: this.abnormalInfo.devId ? this.abnormalInfo.devId : '',
        id: this.abnormalInfo.id ? this.abnormalInfo.id : '',
        type: this.abnormalInfo.abnormalType,
        channel: this.deviceType
      }
      const data = {
        timeData: [
          '2024-03-31 00:00',
          '2024-03-31 00:15',
          '2024-03-31 00:30',
          '2024-03-31 00:45',
          '2024-03-31 01:00',
          '2024-03-31 01:15',
          '2024-03-31 01:30',
          '2024-03-31 01:45',
          '2024-03-31 02:00',
          '2024-03-31 02:15',
          '2024-03-31 02:30',
          '2024-03-31 02:45',
          '2024-03-31 03:00',
          '2024-03-31 03:15',
          '2024-03-31 03:30',
          '2024-03-31 03:45',
          '2024-03-31 04:00',
          '2024-03-31 04:15',
          '2024-03-31 04:30',
          '2024-03-31 04:45',
          '2024-03-31 05:00',
          '2024-03-31 05:15',
          '2024-03-31 05:30',
          '2024-03-31 05:45',
          '2024-03-31 06:00',
          '2024-03-31 06:15',
          '2024-03-31 06:30',
          '2024-03-31 06:45',
          '2024-03-31 07:00',
          '2024-03-31 07:15',
          '2024-03-31 07:30',
          '2024-03-31 07:45',
          '2024-03-31 08:00',
          '2024-03-31 08:15',
          '2024-03-31 08:30',
          '2024-03-31 08:45',
          '2024-03-31 09:00',
          '2024-03-31 09:15',
          '2024-03-31 09:30',
          '2024-03-31 09:45',
          '2024-03-31 10:00',
          '2024-03-31 10:15',
          '2024-03-31 10:30',
          '2024-03-31 10:45',
          '2024-03-31 11:00',
          '2024-03-31 11:15',
          '2024-03-31 11:30',
          '2024-03-31 11:45',
          '2024-03-31 12:00',
          '2024-03-31 12:15',
          '2024-03-31 12:30',
          '2024-03-31 12:45',
          '2024-03-31 13:00',
          '2024-03-31 13:15',
          '2024-03-31 13:30',
          '2024-03-31 13:45',
          '2024-03-31 14:00',
          '2024-03-31 14:15',
          '2024-03-31 14:30',
          '2024-03-31 14:45',
          '2024-03-31 15:00',
          '2024-03-31 15:15',
          '2024-03-31 15:30',
          '2024-03-31 15:45',
          '2024-03-31 16:00',
          '2024-03-31 16:15',
          '2024-03-31 16:30',
          '2024-03-31 16:45',
          '2024-03-31 17:00',
          '2024-03-31 17:15',
          '2024-03-31 17:30',
          '2024-03-31 17:45',
          '2024-03-31 18:00',
          '2024-03-31 18:15',
          '2024-03-31 18:30',
          '2024-03-31 18:45',
          '2024-03-31 19:00',
          '2024-03-31 19:15',
          '2024-03-31 19:30',
          '2024-03-31 19:45',
          '2024-03-31 20:00',
          '2024-03-31 20:15',
          '2024-03-31 20:30',
          '2024-03-31 20:45',
          '2024-03-31 21:00',
          '2024-03-31 21:15',
          '2024-03-31 21:30',
          '2024-03-31 21:45',
          '2024-03-31 22:00',
          '2024-03-31 22:15',
          '2024-03-31 22:30',
          '2024-03-31 22:45',
          '2024-03-31 23:00',
          '2024-03-31 23:15',
          '2024-03-31 23:30',
          '2024-03-31 23:45',
          '2024-04-01 00:00',
          '2024-04-01 00:15',
          '2024-04-01 00:30',
          '2024-04-01 00:45',
          '2024-04-01 01:00',
          '2024-04-01 01:15',
          '2024-04-01 01:30',
          '2024-04-01 01:45',
          '2024-04-01 02:00',
          '2024-04-01 02:15',
          '2024-04-01 02:30',
          '2024-04-01 02:45',
          '2024-04-01 03:00',
          '2024-04-01 03:15',
          '2024-04-01 03:30',
          '2024-04-01 03:45',
          '2024-04-01 04:00',
          '2024-04-01 04:15',
          '2024-04-01 04:30',
          '2024-04-01 04:45',
          '2024-04-01 05:00',
          '2024-04-01 05:15',
          '2024-04-01 05:30',
          '2024-04-01 05:45',
          '2024-04-01 06:00',
          '2024-04-01 06:15',
          '2024-04-01 06:30',
          '2024-04-01 06:45',
          '2024-04-01 07:00',
          '2024-04-01 07:15',
          '2024-04-01 07:30',
          '2024-04-01 07:45',
          '2024-04-01 08:00',
          '2024-04-01 08:15',
          '2024-04-01 08:30',
          '2024-04-01 08:45',
          '2024-04-01 09:00',
          '2024-04-01 09:15',
          '2024-04-01 09:30',
          '2024-04-01 09:45',
          '2024-04-01 10:00',
          '2024-04-01 10:15',
          '2024-04-01 10:30',
          '2024-04-01 10:45',
          '2024-04-01 11:00',
          '2024-04-01 11:15',
          '2024-04-01 11:30',
          '2024-04-01 11:45',
          '2024-04-01 12:00',
          '2024-04-01 12:15',
          '2024-04-01 12:30',
          '2024-04-01 12:45',
          '2024-04-01 13:00',
          '2024-04-01 13:15',
          '2024-04-01 13:30',
          '2024-04-01 13:45',
          '2024-04-01 14:00',
          '2024-04-01 14:15',
          '2024-04-01 14:30',
          '2024-04-01 14:45',
          '2024-04-01 15:00',
          '2024-04-01 15:15',
          '2024-04-01 15:30',
          '2024-04-01 15:45',
          '2024-04-01 16:00',
          '2024-04-01 16:15',
          '2024-04-01 16:30',
          '2024-04-01 16:45',
          '2024-04-01 17:00',
          '2024-04-01 17:15',
          '2024-04-01 17:30',
          '2024-04-01 17:45',
          '2024-04-01 18:00',
          '2024-04-01 18:15',
          '2024-04-01 18:30',
          '2024-04-01 18:45',
          '2024-04-01 19:00',
          '2024-04-01 19:15',
          '2024-04-01 19:30',
          '2024-04-01 19:45',
          '2024-04-01 20:00',
          '2024-04-01 20:15',
          '2024-04-01 20:30',
          '2024-04-01 20:45',
          '2024-04-01 21:00',
          '2024-04-01 21:15',
          '2024-04-01 21:30',
          '2024-04-01 21:45',
          '2024-04-01 22:00',
          '2024-04-01 22:15',
          '2024-04-01 22:30',
          '2024-04-01 22:45',
          '2024-04-01 23:00',
          '2024-04-01 23:15',
          '2024-04-01 23:30',
          '2024-04-01 23:45',
          '2024-04-02 00:00',
          '2024-04-02 00:15',
          '2024-04-02 00:30',
          '2024-04-02 00:45',
          '2024-04-02 01:00',
          '2024-04-02 01:15',
          '2024-04-02 01:30',
          '2024-04-02 01:45',
          '2024-04-02 02:00',
          '2024-04-02 02:15',
          '2024-04-02 02:30',
          '2024-04-02 02:45',
          '2024-04-02 03:00',
          '2024-04-02 03:15',
          '2024-04-02 03:30',
          '2024-04-02 03:45',
          '2024-04-02 04:00',
          '2024-04-02 04:15',
          '2024-04-02 04:30',
          '2024-04-02 04:45',
          '2024-04-02 05:00',
          '2024-04-02 05:15',
          '2024-04-02 05:30',
          '2024-04-02 05:45',
          '2024-04-02 06:00',
          '2024-04-02 06:15',
          '2024-04-02 06:30',
          '2024-04-02 06:45',
          '2024-04-02 07:00',
          '2024-04-02 07:15',
          '2024-04-02 07:30',
          '2024-04-02 07:45',
          '2024-04-02 08:00',
          '2024-04-02 08:15',
          '2024-04-02 08:30',
          '2024-04-02 08:45',
          '2024-04-02 09:00',
          '2024-04-02 09:15',
          '2024-04-02 09:30',
          '2024-04-02 09:45',
          '2024-04-02 10:00',
          '2024-04-02 10:15',
          '2024-04-02 10:30',
          '2024-04-02 10:45',
          '2024-04-02 11:00',
          '2024-04-02 11:15',
          '2024-04-02 11:30',
          '2024-04-02 11:45',
          '2024-04-02 12:00',
          '2024-04-02 12:15',
          '2024-04-02 12:30',
          '2024-04-02 12:45',
          '2024-04-02 13:00',
          '2024-04-02 13:15',
          '2024-04-02 13:30',
          '2024-04-02 13:45',
          '2024-04-02 14:00',
          '2024-04-02 14:15',
          '2024-04-02 14:30',
          '2024-04-02 14:45',
          '2024-04-02 15:00',
          '2024-04-02 15:15',
          '2024-04-02 15:30',
          '2024-04-02 15:45',
          '2024-04-02 16:00',
          '2024-04-02 16:15',
          '2024-04-02 16:30',
          '2024-04-02 16:45',
          '2024-04-02 17:00',
          '2024-04-02 17:15',
          '2024-04-02 17:30',
          '2024-04-02 17:45',
          '2024-04-02 18:00',
          '2024-04-02 18:15',
          '2024-04-02 18:30',
          '2024-04-02 18:45',
          '2024-04-02 19:00',
          '2024-04-02 19:15',
          '2024-04-02 19:30',
          '2024-04-02 19:45',
          '2024-04-02 20:00',
          '2024-04-02 20:15',
          '2024-04-02 20:30',
          '2024-04-02 20:45',
          '2024-04-02 21:00',
          '2024-04-02 21:15',
          '2024-04-02 21:30',
          '2024-04-02 21:45',
          '2024-04-02 22:00',
          '2024-04-02 22:15',
          '2024-04-02 22:30',
          '2024-04-02 22:45',
          '2024-04-02 23:00',
          '2024-04-02 23:15',
          '2024-04-02 23:30',
          '2024-04-02 23:45',
          '2024-04-03 00:00',
          '2024-04-03 00:15',
          '2024-04-03 00:30',
          '2024-04-03 00:45',
          '2024-04-03 01:00',
          '2024-04-03 01:15',
          '2024-04-03 01:30',
          '2024-04-03 01:45',
          '2024-04-03 02:00',
          '2024-04-03 02:15',
          '2024-04-03 02:30',
          '2024-04-03 02:45',
          '2024-04-03 03:00',
          '2024-04-03 03:15',
          '2024-04-03 03:30',
          '2024-04-03 03:45',
          '2024-04-03 04:00',
          '2024-04-03 04:15',
          '2024-04-03 04:30',
          '2024-04-03 04:45',
          '2024-04-03 05:00',
          '2024-04-03 05:15',
          '2024-04-03 05:30',
          '2024-04-03 05:45',
          '2024-04-03 06:00',
          '2024-04-03 06:15',
          '2024-04-03 06:30',
          '2024-04-03 06:45',
          '2024-04-03 07:00',
          '2024-04-03 07:15',
          '2024-04-03 07:30',
          '2024-04-03 07:45',
          '2024-04-03 08:00',
          '2024-04-03 08:15',
          '2024-04-03 08:30',
          '2024-04-03 08:45',
          '2024-04-03 09:00',
          '2024-04-03 09:15',
          '2024-04-03 09:30',
          '2024-04-03 09:45',
          '2024-04-03 10:00',
          '2024-04-03 10:15',
          '2024-04-03 10:30',
          '2024-04-03 10:45',
          '2024-04-03 11:00',
          '2024-04-03 11:15',
          '2024-04-03 11:30',
          '2024-04-03 11:45',
          '2024-04-03 12:00',
          '2024-04-03 12:15',
          '2024-04-03 12:30',
          '2024-04-03 12:45',
          '2024-04-03 13:00',
          '2024-04-03 13:15',
          '2024-04-03 13:30',
          '2024-04-03 13:45',
          '2024-04-03 14:00',
          '2024-04-03 14:15',
          '2024-04-03 14:30',
          '2024-04-03 14:45',
          '2024-04-03 15:00',
          '2024-04-03 15:15',
          '2024-04-03 15:30',
          '2024-04-03 15:45',
          '2024-04-03 16:00',
          '2024-04-03 16:15',
          '2024-04-03 16:30',
          '2024-04-03 16:45',
          '2024-04-03 17:00',
          '2024-04-03 17:15',
          '2024-04-03 17:30',
          '2024-04-03 17:45',
          '2024-04-03 18:00',
          '2024-04-03 18:15',
          '2024-04-03 18:30',
          '2024-04-03 18:45',
          '2024-04-03 19:00',
          '2024-04-03 19:15',
          '2024-04-03 19:30',
          '2024-04-03 19:45',
          '2024-04-03 20:00',
          '2024-04-03 20:15',
          '2024-04-03 20:30',
          '2024-04-03 20:45',
          '2024-04-03 21:00',
          '2024-04-03 21:15',
          '2024-04-03 21:30',
          '2024-04-03 21:45',
          '2024-04-03 22:00',
          '2024-04-03 22:15',
          '2024-04-03 22:30',
          '2024-04-03 22:45',
          '2024-04-03 23:00',
          '2024-04-03 23:15',
          '2024-04-03 23:30',
          '2024-04-03 23:45',
          '2024-04-04 00:00',
          '2024-04-04 00:15',
          '2024-04-04 00:30',
          '2024-04-04 00:45',
          '2024-04-04 01:00',
          '2024-04-04 01:15',
          '2024-04-04 01:30',
          '2024-04-04 01:45',
          '2024-04-04 02:00',
          '2024-04-04 02:15',
          '2024-04-04 02:30',
          '2024-04-04 02:45',
          '2024-04-04 03:00',
          '2024-04-04 03:15',
          '2024-04-04 03:30',
          '2024-04-04 03:45',
          '2024-04-04 04:00',
          '2024-04-04 04:15',
          '2024-04-04 04:30',
          '2024-04-04 04:45',
          '2024-04-04 05:00',
          '2024-04-04 05:15',
          '2024-04-04 05:30',
          '2024-04-04 05:45',
          '2024-04-04 06:00',
          '2024-04-04 06:15',
          '2024-04-04 06:30',
          '2024-04-04 06:45',
          '2024-04-04 07:00',
          '2024-04-04 07:15',
          '2024-04-04 07:30',
          '2024-04-04 07:45',
          '2024-04-04 08:00',
          '2024-04-04 08:15',
          '2024-04-04 08:30',
          '2024-04-04 08:45',
          '2024-04-04 09:00',
          '2024-04-04 09:15',
          '2024-04-04 09:30',
          '2024-04-04 09:45',
          '2024-04-04 10:00',
          '2024-04-04 10:15',
          '2024-04-04 10:30',
          '2024-04-04 10:45',
          '2024-04-04 11:00',
          '2024-04-04 11:15',
          '2024-04-04 11:30',
          '2024-04-04 11:45',
          '2024-04-04 12:00',
          '2024-04-04 12:15',
          '2024-04-04 12:30',
          '2024-04-04 12:45',
          '2024-04-04 13:00',
          '2024-04-04 13:15',
          '2024-04-04 13:30',
          '2024-04-04 13:45',
          '2024-04-04 14:00',
          '2024-04-04 14:15',
          '2024-04-04 14:30',
          '2024-04-04 14:45',
          '2024-04-04 15:00',
          '2024-04-04 15:15',
          '2024-04-04 15:30',
          '2024-04-04 15:45',
          '2024-04-04 16:00',
          '2024-04-04 16:15',
          '2024-04-04 16:30',
          '2024-04-04 16:45',
          '2024-04-04 17:00',
          '2024-04-04 17:15',
          '2024-04-04 17:30',
          '2024-04-04 17:45',
          '2024-04-04 18:00',
          '2024-04-04 18:15',
          '2024-04-04 18:30',
          '2024-04-04 18:45',
          '2024-04-04 19:00',
          '2024-04-04 19:15',
          '2024-04-04 19:30',
          '2024-04-04 19:45',
          '2024-04-04 20:00',
          '2024-04-04 20:15',
          '2024-04-04 20:30',
          '2024-04-04 20:45',
          '2024-04-04 21:00',
          '2024-04-04 21:15',
          '2024-04-04 21:30',
          '2024-04-04 21:45',
          '2024-04-04 22:00',
          '2024-04-04 22:15',
          '2024-04-04 22:30',
          '2024-04-04 22:45',
          '2024-04-04 23:00',
          '2024-04-04 23:15',
          '2024-04-04 23:30',
          '2024-04-04 23:45'
        ],
        list: [
          {
            data: [
              5.17944, 4.31162, 4.33848, 4.41772, 4.42434, 4.77794, 4.64386,
              5.0054, 5.16378, 6.73106, 4.46228, 4.72106, 4.17532, 4.81782,
              4.51232, 5.69742, 4.81394, 4.83246, 4.80276, 4.8762, 4.47368,
              4.88932, 5.85134, 4.28324, 5.06306, 6.40554, 12.95462, 7.73652,
              5.69946, 6.00514, 7.41252, 5.6191, 5.68572, 3.9384, 3.3375,
              2.52512, 3.85234, 2.45036, 14.79788, 12.9954, 12.5237, 16.75272,
              12.90752, 12.62838, 11.36628, 17.18536, 10.58838, 0.0, 0.0,
              5.12452, 10.42868, 4.98382, 5.1124, 7.2762, 3.38298, 6.03608,
              5.74016, 2.36074, 7.30388, 6.76148, 30.14802, 18.54888,
              22.87018, 39.34144, 4.93714, 2.13064, 3.83108, 2.2463, 8.44534,
              9.00422, 1.81996, 5.86374, 9.13024, 10.28828, 14.30176, 4.30664,
              20.37404, 13.8325, 7.4584, 4.75698, 13.90706, 5.5305, 6.25906,
              5.55258, 9.4396, 7.33612, 7.37458, 5.42634, 7.1401, 5.01954,
              4.92004, 4.28588, 4.29168, 3.92894, 4.28854, 4.70236, 4.25282,
              5.17558, 4.2102, 4.58068, 3.8623, 4.5109, 5.11404, 4.50144,
              4.20542, 4.34254, 4.04184, 4.06728, 3.98062, 4.14826, 4.17236,
              4.07766, 4.18366, 3.98194, 3.85874, 9.7348, 3.76364, 4.64356,
              4.39778, 4.91476, 4.78688, 5.26876, 6.40534, 5.6838, 6.12936,
              4.90152, 9.7523, 2.9834, 3.0543, 3.632, 15.61828, 16.40646,
              19.45872, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 19.69056, 19.69056, 19.69056, 19.69056, 19.69056,
              19.69056, 3.1483, 9.13594, 9.6108, 1.96574, 4.70124, 3.55266,
              4.7586, 14.33034, 14.73134, 11.69892, 11.52526, 7.79744,
              12.51974, 12.11416, 12.31018, 5.71248, 3.74572, 3.78936,
              13.99852, 25.18452, 23.2844, 23.88712, 23.83626, 15.34494,
              4.56064, 7.98014, 18.49122, 9.44956, 8.54868, 10.20304, 15.7904,
              6.58478, 7.87924, 9.43136, 7.73214, 7.80966, 7.16288, 6.85598,
              12.89256, 5.80068, 5.68828, 6.04136, 5.51636, 5.66294, 5.43802,
              5.41962, 6.0381, 5.2304, 5.09104, 5.9669, 4.71212, 5.3534,
              5.78938, 5.6602, 5.02146, 5.06388, 5.1059, 4.9354, 4.66472,
              4.65576, 4.8639, 4.8879, 4.63878, 4.74182, 4.7283, 4.65728,
              4.77682, 4.7115, 5.28738, 5.03346, 4.74356, 5.12604, 4.77326,
              5.72236, 8.49946, 16.8161, 10.60384, 4.9347, 7.24834, 4.3155,
              2.89612, 3.8558, 2.76174, 4.59808, 2.50762, 14.19576, 12.235,
              14.58902, 3.45774, 6.91548, 18.56862, 15.28686, 18.5022,
              10.11484, 6.47094, 22.95684, 19.66238, 6.6279, 5.99538, 4.99654,
              2.15606, 7.49512, 2.42594, 8.13792, 2.98676, 2.69734, 7.18546,
              6.74052, 7.51608, 4.8464, 6.7097, 12.67436, 15.73496, 16.46576,
              13.29122, 13.25918, 8.58846, 6.97398, 9.09912, 2.765, 2.84016,
              12.19106, 17.64078, 7.44558, 12.91708, 18.1137, 11.96208,
              7.1055, 6.60848, 6.83004, 16.09242, 7.34274, 8.58886, 9.75576,
              8.28176, 8.13568, 8.18248, 11.86442, 6.80776, 6.4738, 6.0727,
              6.82474, 6.04176, 7.22138, 6.1383, 5.3533, 5.32246, 5.94858,
              6.20534, 5.87606, 5.6903, 6.54796, 5.42368, 5.52898, 6.13962,
              5.36154, 5.5302, 5.48076, 5.26356, 6.31896, 7.85654, 5.88124,
              5.9136, 6.48752, 6.29964, 7.4995, 7.92104, 5.73262, 8.44076,
              6.16038, 14.8521, 13.71378, 6.18052, 12.58454, 10.2598, 6.67064,
              3.04158, 6.24786, 4.98046, 6.55386, 5.97106, 9.1161, 6.23952,
              2.70212, 3.3612, 4.1218, 4.60796, 2.95664, 15.23508, 10.25656,
              3.61898, 5.4011, 8.5559, 5.28982, 8.5433, 6.80298, 6.8038,
              2.76266, 7.41892, 7.9476, 8.2433, 8.55286, 2.1173, 8.50688,
              4.9585, 7.65564, 4.72942, 4.65484, 3.94388, 2.43886, 1.96594,
              1.69292, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
              0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
              0.0, 0.0, 0.0
            ],
            name: 'C相电流'
          },
          {
            data: [
              9.37846, 9.21468, 8.12408, 9.52596, 8.49548, 8.92506, 9.21976,
              8.21044, 6.3911, 8.36232, 6.88396, 5.26224, 5.38614, 5.26234,
              4.90692, 8.31166, 17.64842, 8.62406, 8.38552, 8.4848, 8.92396,
              8.8683, 9.63134, 9.40532, 8.93728, 8.42072, 11.4979, 18.50748,
              9.2566, 27.91606, 14.01988, 7.0872, 8.30546, 3.66404, 4.91312,
              5.83914, 8.87512, 6.7987, 2.10796, 2.99388, 2.87252, 3.0008,
              2.11792, 4.43878, 3.82142, 2.49328, 5.2471, 0.0, 0.0, 15.64778,
              17.34324, 2.91454, 2.35178, 5.12024, 3.52682, 2.52746, 5.91318,
              1.74296, 2.79786, 6.85222, 33.50546, 24.5516, 26.2264, 35.83028,
              4.47326, 3.4498, 8.31106, 13.31614, 11.05926, 1.5503, 2.3875,
              2.99652, 15.20294, 3.45602, 9.77722, 20.02126, 16.52048,
              23.90808, 17.6832, 12.60904, 12.20906, 12.7707, 12.9243,
              11.8334, 18.4612, 11.02356, 12.105, 15.71544, 9.9232, 8.85702,
              7.73396, 7.73284, 6.87968, 8.7795, 6.09456, 6.73726, 5.14618,
              5.27944, 5.6018, 5.47424, 5.5607, 6.0437, 4.57946, 7.6769,
              7.23918, 5.01546, 6.1374, 6.59006, 7.71078, 8.57544, 7.22168,
              7.40132, 8.43688, 6.50848, 5.8492, 5.30598, 4.45272, 4.80144,
              5.71788, 6.57054, 4.98718, 9.7998, 7.56104, 6.98802, 15.9671,
              16.76728, 23.65652, 25.86762, 17.72064, 15.58432, 3.2665,
              13.38064, 2.21792, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 5.69326,
              5.69326, 5.69326, 5.69326, 5.69326, 5.69326, 28.6559, 15.84248,
              14.94984, 6.6628, 4.42068, 3.67472, 4.33258, 4.14632, 4.51822,
              3.9206, 3.16966, 3.27138, 4.93938, 4.74874, 4.36686, 3.99668,
              5.27304, 2.96174, 16.04034, 14.88984, 15.58024, 14.3401,
              10.70444, 14.67254, 26.83654, 21.4205, 17.4708, 16.22132,
              19.83896, 19.83562, 9.70012, 22.10988, 15.3779, 19.31874,
              9.48618, 9.00726, 8.1255, 7.33958, 7.49694, 9.62922, 5.73426,
              5.96426, 5.218, 6.51368, 5.2656, 6.74754, 5.49022, 4.22232,
              5.75358, 3.83962, 5.84106, 7.28088, 9.84608, 7.01456, 6.81712,
              7.62308, 7.31658, 7.706, 8.3311, 8.38094, 8.48318, 8.20394,
              7.95918, 7.49328, 8.36598, 8.21554, 7.62106, 7.7944, 7.341,
              7.9484, 7.18374, 8.2131, 8.92192, 6.42222, 6.76616, 12.27976,
              24.14226, 22.03196, 10.50476, 4.19514, 20.14588, 18.59446,
              4.20084, 12.30398, 2.07926, 4.59524, 3.61512, 1.81356, 1.8515,
              2.93294, 2.51668, 2.11588, 7.94158, 5.82164, 2.14132, 11.74112,
              27.7767, 12.17254, 14.95096, 7.28454, 6.4803, 7.0577, 3.26538,
              6.67542, 6.69352, 1.51702, 6.55956, 4.70266, 6.0022, 4.36024,
              5.86874, 5.10946, 2.24802, 2.4648, 2.14436, 2.54904, 8.73718,
              7.6712, 10.68716, 10.87188, 16.62028, 20.61024, 16.87704,
              11.71508, 14.86022, 22.68788, 21.55406, 22.59614, 11.54694,
              13.22612, 14.9296, 27.63214, 28.8381, 18.74186, 11.81996,
              14.81212, 12.80742, 11.78578, 14.4989, 10.28116, 11.00352,
              11.23292, 8.90462, 11.6034, 9.3689, 12.14376, 8.31156, 8.072,
              11.32416, 7.9071, 11.18114, 8.76098, 8.09824, 10.95418, 8.32366,
              10.88278, 7.21496, 7.38728, 10.06094, 7.66988, 8.66578,
              10.47272, 8.42702, 10.45196, 7.25494, 7.07672, 10.40274,
              8.26854, 12.29248, 11.00504, 20.03276, 14.62758, 29.79878,
              11.18988, 17.58992, 7.7126, 10.5597, 11.2323, 3.8739, 5.54464,
              3.06752, 5.85134, 9.54112, 10.96568, 2.92032, 15.80668,
              13.18298, 27.23002, 10.69712, 2.9014, 9.28366, 16.95628,
              31.2379, 24.67132, 19.78332, 4.83652, 2.54882, 3.00058, 3.97136,
              7.1114, 6.1738, 4.22994, 3.37992, 6.29242, 7.26156, 6.22722,
              3.2257, 3.0011, 3.6848, 2.29166, 2.66998, 2.35098, 0.0, 0.0,
              0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
              0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
            ],
            name: 'B相电流'
          },
          {
            data: [
              2.01416, 2.22158, 1.57562, 2.3583, 2.81168, 2.68148, 2.67008,
              1.79738, 2.23216, 1.77694, 2.15922, 1.7395, 1.9511, 2.46064,
              1.56586, 1.86554, 6.42192, 2.52666, 1.73086, 1.7333, 3.57676,
              2.44294, 2.43856, 1.64438, 2.20326, 3.0425, 1.62312, 2.17082,
              8.48644, 3.19296, 2.83854, 1.33444, 15.12838, 9.65078, 0.75144,
              0.9725, 1.07494, 1.47542, 2.14844, 4.009, 5.12318, 6.23444,
              6.47116, 7.19788, 7.50762, 5.8429, 6.45346, 0.0, 0.0, 8.12072,
              3.3136, 7.4997, 1.96656, 8.7328, 7.17244, 6.68244, 9.47164,
              3.84532, 8.71978, 10.0944, 30.44404, 20.09826, 23.91938,
              30.62794, 6.51794, 3.7263, 4.82768, 3.07882, 4.19048, 3.36976,
              2.24792, 2.55534, 1.51774, 2.22412, 2.4347, 1.71366, 2.54028,
              2.24946, 1.71966, 2.59898, 13.60748, 4.31214, 3.66598, 3.67086,
              3.92436, 3.16234, 3.35928, 3.8506, 8.25114, 3.54502, 2.70966,
              2.25006, 2.05892, 2.21638, 1.94876, 2.70946, 2.7591, 5.1355,
              3.4842, 1.79728, 1.98496, 2.011, 2.3531, 2.57406, 2.50824,
              2.21638, 2.6537, 2.83794, 2.55422, 2.98462, 1.91814, 2.80598,
              1.93462, 1.86838, 2.22524, 1.37574, 1.64082, 1.44856, 1.84722,
              1.6627, 1.6156, 2.2642, 2.7538, 3.36396, 4.5046, 3.54208,
              1.3563, 1.01074, 0.65582, 0.84716, 1.14818, 1.6158, 1.86848,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092, 2.04092,
              2.04092, 2.04092, 2.04092, 3.58704, 2.51526, 2.02748, 2.00124,
              4.84894, 4.26208, 5.11506, 2.21618, 2.43032, 9.25638, 8.3257,
              10.18442, 8.19336, 1.66342, 6.93674, 5.48228, 5.12868, 5.45644,
              2.8359, 11.4918, 10.52928, 11.76432, 9.14652, 10.7018, 6.98252,
              1.52578, 6.53656, 7.07398, 11.03628, 4.9238, 5.65816, 3.27392,
              3.0242, 3.14566, 12.53998, 3.39752, 6.23758, 4.1094, 4.84874,
              4.91476, 4.25872, 4.35202, 3.7619, 3.5199, 3.0958, 3.03508,
              3.53892, 3.39112, 3.15278, 2.91422, 2.5359, 2.53612, 2.36512,
              2.48016, 2.49562, 2.48942, 3.08014, 2.72258, 2.66774, 2.7659,
              3.09346, 3.35286, 2.91728, 2.50284, 2.50102, 2.36592, 3.56914,
              3.7907, 3.32712, 2.524, 2.73752, 2.60214, 4.46512, 9.03086,
              3.77268, 3.76048, 4.39412, 1.5452, 1.48092, 1.4981, 1.54774,
              1.29212, 1.23494, 1.16424, 1.57318, 3.09438, 3.9617, 5.07172,
              5.07548, 5.51696, 5.17894, 1.6747, 2.30306, 1.34124, 9.72942,
              4.54752, 7.5417, 0.96242, 3.37036, 10.28168, 10.31342, 10.08524,
              4.99014, 7.52798, 9.5869, 3.09784, 9.50602, 9.57906, 7.60844,
              6.4323, 6.4096, 6.0078, 0.92916, 5.36204, 2.56998, 3.61704,
              1.86402, 1.43534, 2.91544, 0.93648, 1.99584, 1.94458, 2.91636,
              4.02262, 7.33806, 2.87446, 3.97014, 13.89242, 3.8264, 13.29936,
              4.30094, 5.20304, 5.00732, 4.45872, 5.38178, 5.52866, 5.51016,
              4.62524, 4.21468, 3.92476, 3.7033, 4.20532, 9.42464, 11.50076,
              4.75708, 4.4637, 2.83326, 4.58558, 9.07288, 9.0571, 9.41508,
              8.59344, 9.35944, 11.86106, 8.51664, 9.23838, 8.89008, 8.08858,
              11.30818, 9.54406, 7.60742, 10.73558, 8.58784, 9.37896, 8.06712,
              7.85552, 9.72962, 8.91672, 8.01818, 11.21948, 15.24354, 9.85138,
              10.69122, 7.05252, 2.1467, 1.12142, 0.95428, 9.56644, 0.8902,
              4.34244, 2.0404, 2.00298, 3.0012, 1.40798, 5.17272, 6.12142,
              4.37338, 1.08164, 4.2922, 2.66316, 7.459, 4.02414, 6.17208,
              4.85616, 10.24496, 5.08474, 10.50894, 1.59006, 9.23858, 8.71246,
              9.9117, 9.92218, 1.63706, 6.66036, 6.61916, 6.02884, 4.971,
              7.42788, 3.7446, 3.4262, 2.23988, 1.5856, 0.0, 0.0, 0.0, 0.0,
              0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
              0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
            ],
            name: 'A相电流'
          }
        ],
        maxLoadRate: '0.79',
        loadRateTime: '2024-03-31 15:45:00',
        maxCurrent: '39.34',
        minVoltage: null,
        currentTime: '2024-03-31 15:45:00',
        maxCurrentImbalance: null,
        maxCurrentImbalanceTime: null,
        maxVoltageImbalance: null,
        maxVoltageImbalanceTime: null
      }
      this.loadRateInfo = data
      this.oneEchartData(data.timeData, data.list, data)
      // this.$axios.post(homApi.getCureChart, param).then(({ code, data }) => {
      //   if (code == 200 && data) {
      //     this.loadRateInfo = data;
      //     this.oneEchartData(data.timeData, data.list, data);
      //   }
      // });
    },

    // 负载率曲线图
    oneEchartData(xDayTime, realData, data) {
      if (!this.myChart) {
        this.myChart = this.$echarts.init(this.$refs.oneRightEhart)
        window.addEventListener('resize', function() {
          this.myChart.resize()
        })
        const tabOneBottom = document.getElementById('tabOneBottom')
        const resizeObserver = new ResizeObserver((entries) => {
          for (const entry of entries) {
            // 在这里可以执行相应的操作或触发自定义事件
            this.myChart.resize()
          }
        })

        // 开始监听目标元素的大小变化
        resizeObserver.observe(tabOneBottom)
      }
      // 根据名字排序
      realData = realData.sort(function(a, b) {
        return String(a.name).localeCompare(String(b.name))
      })
      console.log('排序后的数据：', realData)
      const options = {
        color: ['#00FFD5', 'rgba(253, 195, 69, 1)', '#367CFF'],
        grid: {
          top: '30px',
          bottom: '15%',
          left: '70px',
          right: '40px'
        },
        tooltip: {
          trigger: 'axis',
          backgroundColor: 'transparent',
          borderWidth: 0,
          padding: 0,
          formatter: function(params) {
            let html = `<div class='tooltipBox'><p class='tooltip-head'>${params[0].name}</p>`
            params.forEach((item) => {
              html +=
                `<div class='tooltip-li'><p class='tooltip-li-left'>${item.marker}${item.seriesName}</p>` +
                `<p class='tooltip-li-num' style='color:${item.color}'>${item.value}</p></div>`
            })
            html += `</div>`
            return html
          }
        },
        legend: {
          type: 'plain',
          top: 0,
          // left: "right",
          textStyle: {
            color: '#CCD0D4',
            fontSize: 10
          }
        },
        xAxis: [
          {
            data: xDayTime,
            type: 'category',
            boundaryGap: false,
            axisLine: {
              lineStyle: {
                color: '#202E51'
              }
            },
            // data: timeData,
            axisTick: {
              show: false
            },
            lineStyle: {
              color: '#202E51'
            },
            axisLabel: {
              color: '#CCD0D4'
              // rotate: -45
            }
          }
        ],
        yAxis: [],
        series: []
      }
      const series = []
      let yAxis = [
        {
          name: this.echartYAxisName[this.abnormalInfo.abnormalType],
          nameTextStyle: {
            padding: [0, -10, 0, -35], // 四个数字分别为上右下左与原位置距离
            color: '#ffffff'
          },
          type: 'value',
          // 网格线
          splitLine: {
            show: true,
            lineStyle: {
              type: 'dotted',
              color: '#202E51'
            }
          },
          axisLine: {
            show: false
          },
          axisTick: {
            show: false
          },
          min: 0,
          // symbol: "none",
          axisLabel: {
            color: '#CCD0D4'
          }
        }
      ]
      realData.forEach((item, idx) => {
        const seriseItem = {
          name: item.name,
          type: 'line',
          lineStyle: {
            width: 3
          },
          smooth: true,
          symbol: 'none',
          data: item.data
        }
        if (this.deviceType == 2 && this.abnormalInfo.abnormalType == 3) {
          if (idx === 0) {
            yAxis = []
          }
          const maxField =
            this.abnormalTypeLine[this.abnormalInfo.abnormalType][idx]
              .fieldName
          const yAxisItem = {
            name:
              item.name + this.echartYAxisUnit[this.abnormalInfo.abnormalType],
            nameTextStyle: {
              padding: [0, -10, 0, -35], // 四个数字分别为上右下左与原位置距离
              color: '#ffffff'
            },
            type: 'value',
            // 网格线
            splitLine: {
              show: true,
              lineStyle: {
                type: 'dotted',
                color: '#202E51'
              }
            },
            axisLine: {
              show: false
            },
            axisTick: {
              show: false
            },
            max:
              this.loadRateInfo[maxField] == '0.00'
                ? 30
                : Math.ceil(this.loadRateInfo[maxField]) + 10,
            min: 0,
            // symbol: "none",
            axisLabel: {
              color: '#CCD0D4'
            }
          }
          yAxis.push(yAxisItem)
        }
        series.push(seriseItem)
      })
      options.series = series
      options.yAxis = yAxis
      this.myChart.clear()
      this.$nextTick(() => {
        this.myChart.setOption(options)
      })
    }
  }
}
